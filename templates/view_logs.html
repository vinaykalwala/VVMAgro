{% extends "backendpages/base.html" %}
{% block content %}
<style>
.logs-heading{
  text-align:center;color:#3F5187;font-size:2rem;font-weight:600;margin:30px 0 20px;
}
.logs-action-buttons{display:flex;justify-content:flex-end;gap:10px;margin-bottom:20px;flex-wrap:wrap;}
.logs-action-buttons a{
  display:inline-flex;align-items:center;padding:8px 14px;border-radius:6px;font-size:14px;
  font-weight:500;text-decoration:none;transition:all .3s ease;color:#fff;
}
.clear-btn{background:#dc3545}.clear-btn:hover{background:#c82333}
.download-btn{background:#3F5187}.download-btn:hover{background:#2e3b66}

.logs-table-wrapper{overflow-x:auto;background:#fff;border:1px solid rgb(191,193,218);border-radius:8px;}
.logs-table{width:100%;border-collapse:collapse;font-size:14px;text-align:left;}
.logs-table th{
  background:#3F5187;color:#fff;padding:10px;border:1px solid #ffffff;white-space:nowrap;position:sticky;top:0;z-index:1;
}
.logs-table td{
  padding:10px;border:1px solid rgb(191,193,218);color:#3F5187;vertical-align:top;white-space:pre-wrap;
}
.logs-table tr:nth-child(even){background:rgb(229,231,251);}
.user-pill{
  background:#ffc1071f;border:1px solid #ffc10755;color:#3F5187;font-weight:600;padding:2px 6px;border-radius:9999px;
}
.alert-info{
  background:rgb(229,231,251);color:#3F5187;border:1px solid rgb(191,193,218);
  border-radius:6px;padding:10px;text-align:center;font-weight:500;
}
@media(max-width:768px){
  .logs-action-buttons{justify-content:center;}
  .logs-table{min-width:900px;}
}
@media print {
 /* Hide entire header layout, buttons, headings, logos, etc. */
  header, nav, .navbar, .logs-action-buttons,
  .main-content h2, .sidebar, .topbar,
  .breadcrumbs, .page-header, .page-title {
    display: none !important;
  }

  /* Ensure background colors and styles are preserved */
  body {
    -webkit-print-color-adjust: exact !important;
    print-color-adjust: exact !important;
    color: #000;
    background: #fff;
  }

  /* Preserve table styling */
  .logs-table th {
    background-color: #3F5187 !important;
    color: #fff !important;
    -webkit-print-color-adjust: exact;
  }

  .logs-table-wrapper {
    overflow: visible !important;
  }

  .logs-table td, .logs-table th {
    page-break-inside: avoid !important;
    break-inside: avoid !important;
  }

  tr {
    page-break-inside: avoid !important;
  }

  table {
    page-break-inside: auto;
    page-break-after: auto;
  }

  .user-pill {
    background-color: #ffc1071f !important;
    border: 1px solid #ffc10755 !important;
    color: #3F5187 !important;
  }
}

</style>

<div class="main-content">
  <h2 class="logs-heading">Application Logs</h2>

 <div class="logs-action-buttons">
  <a href="{% url 'clear_logs' %}" class="clear-btn">üóëÔ∏è Clear Logs</a>
  <a href="{% url 'download_logs' %}" class="download-btn">‚¨áÔ∏è Download Logs</a>
  <a href="javascript:window.print()" class="download-btn print-btn">üñ®Ô∏è Print Logs</a>
</div>


  <div class="logs-table-wrapper">
    {% if rows and rows|length %}
      <table class="logs-table">
        <thead>
          <tr>
            <th>#</th>
            <th>Time</th>
            <th>User</th>
            <th>IP</th>
            <th>GET</th>
            <th>POST</th>
            <!-- <th>Status</th> -->
          </tr>
        </thead>
        <tbody>
        {% for r in rows %}
          <tr>
            <td>{{ forloop.counter }}</td>
            <td>{{ r.ts }}</td>
            <td><span class="user-pill">{{ r.user }}</span></td>
            <td>{{ r.ip }}</td>
            <td>{{ r.get }}</td>
            <td>{{ r.post }}</td>
            <!-- <td>{{ r.status }}</td> -->
          </tr>
        {% endfor %}
        </tbody>
      </table>
    {% else %}
      <div class="alert-info">No logs found.</div>
    {% endif %}
  </div>
</div>
{% endblock %}
